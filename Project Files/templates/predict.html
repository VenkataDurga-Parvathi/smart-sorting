{% extends "base.html" %}
{% block content %}

<section class="upload-section">
    <div class="upload-box">
        <h1>Upload Fruit Image</h1>
        <p>Smart Sorting will classify your fruit as fresh or rotten using the trained CNN.</p>

        <form action="/predict" method="POST" enctype="multipart/form-data">
            <label for="fileInput" class="custom-file-label">
                <i class="fa-solid fa-cloud-arrow-up"></i>
                <span>Choose image</span>
            </label>
            <input type="file" name="file" id="fileInput" accept="image/*" required>

            <div class="preview-wrapper" id="previewWrapper">
                <img id="previewImage" alt="Preview">
                <span id="previewName"></span>
            </div>

            <button type="submit" class="btn" style="margin-top: 18px;">
                <i class="fa-solid fa-magnifying-glass-chart"></i>
                Predict Freshness
            </button>
        </form>
    </div>
</section>

<!-- page‑level JS only for preview -->
<script>
const fileInput = document.getElementById("fileInput");
const previewWrapper = document.getElementById("previewWrapper");
const previewImage = document.getElementById("previewImage");
const previewName = document.getElementById("previewName");

fileInput?.addEventListener("change", (e) => {
    const file = e.target.files[0];
    if (!file) return;
    previewWrapper.style.display = "flex";
    previewName.textContent = file.name;
    previewImage.src = URL.createObjectURL(file);   // client‑side preview.[web:7]
});
</script>

{% endblock %}
